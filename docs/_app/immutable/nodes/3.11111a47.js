import{s as le,a as R,f as w,N as ce,d,c as S,g as y,h as V,j as x,i as I,y as pe,l as F,m as N,P as h,n as oe,p as W,J as $e,k as X,C as de,R as Z,K as me}from"../chunks/scheduler.8f106bd9.js";import{S as re,i as ie,g as _e,t as v,c as ge,a as b,b as C,d as D,m as L,e as E,f as ee}from"../chunks/index.4fbda23c.js";import{u as he,B as K,T as te,I as ve}from"../chunks/InitialFocus.183c7331.js";import{C as M}from"../chunks/CommonLabel.8078f900.js";import{u as z,c as ne,r as se,i as ae,a as be}from"../chunks/axios-base.85f1402c.js";import{g as J}from"../chunks/navigation.89e7ea5a.js";function ke(l){let t,n,e,s,o,c,u,m;return u=new K({props:{color:"primary",ripple:!0,$$slots:{default:[Ce]},$$scope:{ctx:l}}}),u.$on("click",l[6]),{c(){t=w("div"),n=w("div"),e=w("strong"),s=F("You are logged in as: "),o=F(l[2]),c=R(),C(u.$$.fragment),this.h()},l(a){t=y(a,"DIV",{class:!0});var f=V(t);n=y(f,"DIV",{});var $=V(n);e=y($,"STRONG",{});var g=V(e);s=N(g,"You are logged in as: "),o=N(g,l[2]),g.forEach(d),$.forEach(d),c=S(f),D(u.$$.fragment,f),f.forEach(d),this.h()},h(){x(t,"class","form-field mt-20 svelte-epcsw7")},m(a,f){I(a,t,f),h(t,n),h(n,e),h(e,s),h(e,o),h(t,c),L(u,t,null),m=!0},p(a,f){(!m||f&4)&&oe(o,a[2]);const $={};f&8192&&($.$$scope={dirty:f,ctx:a}),u.$set($)},i(a){m||(b(u.$$.fragment,a),m=!0)},o(a){v(u.$$.fragment,a),m=!1},d(a){a&&d(t),E(u)}}}function we(l){let t,n="Login",e,s,o,c,u,m,a,f,$,g,U,O,k,i,T,_,B,Q,Y;function ue(r){l[7](r)}let A={label:"User name or email",type:"text",variant:"filled",input$use:[ve]};l[0]!==void 0&&(A.value=l[0]),c=new te({props:A}),W.push(()=>ee(c,"value",ue));function fe(r){l[8](r)}let H={type:"password",label:"Password",variant:"filled"};return l[1]!==void 0&&(H.value=l[1]),a=new te({props:H}),W.push(()=>ee(a,"value",fe)),i=new K({props:{ripple:!0,color:"secondary",type:"button",$$slots:{default:[Le]},$$scope:{ctx:l}}}),i.$on("click",l[9]),_=new K({props:{color:"primary",ripple:!0,type:"submit",disabled:l[4],$$slots:{default:[Ie]},$$scope:{ctx:l}}}),{c(){t=w("div"),t.textContent=n,e=R(),s=w("form"),o=w("div"),C(c.$$.fragment),m=R(),C(a.$$.fragment),$=R(),g=w("div"),U=F(l[3]),O=R(),k=w("div"),C(i.$$.fragment),T=R(),C(_.$$.fragment),this.h()},l(r){t=y(r,"DIV",{class:!0,"data-svelte-h":!0}),$e(t)!=="svelte-b1znxs"&&(t.textContent=n),e=S(r),s=y(r,"FORM",{autocomplete:!0});var p=V(s);o=y(p,"DIV",{class:!0});var j=V(o);D(c.$$.fragment,j),m=S(j),D(a.$$.fragment,j),j.forEach(d),$=S(p),g=y(p,"DIV",{style:!0});var q=V(g);U=N(q,l[3]),q.forEach(d),O=S(p),k=y(p,"DIV",{class:!0});var P=V(k);D(i.$$.fragment,P),T=S(P),D(_.$$.fragment,P),P.forEach(d),p.forEach(d),this.h()},h(){x(t,"class","title svelte-epcsw7"),x(o,"class","form-field svelte-epcsw7"),X(g,"color","red"),X(g,"margin-top","20px"),x(k,"class","button-group svelte-epcsw7"),x(s,"autocomplete","off")},m(r,p){I(r,t,p),I(r,e,p),I(r,s,p),h(s,o),L(c,o,null),h(o,m),L(a,o,null),h(s,$),h(s,g),h(g,U),h(s,O),h(s,k),L(i,k,null),h(k,T),L(_,k,null),B=!0,Q||(Y=de(s,"submit",l[5]),Q=!0)},p(r,p){const j={};!u&&p&1&&(u=!0,j.value=r[0],Z(()=>u=!1)),c.$set(j);const q={};!f&&p&2&&(f=!0,q.value=r[1],Z(()=>f=!1)),a.$set(q),(!B||p&8)&&oe(U,r[3]);const P={};p&8192&&(P.$$scope={dirty:p,ctx:r}),i.$set(P);const G={};p&16&&(G.disabled=r[4]),p&8192&&(G.$$scope={dirty:p,ctx:r}),_.$set(G)},i(r){B||(b(c.$$.fragment,r),b(a.$$.fragment,r),b(i.$$.fragment,r),b(_.$$.fragment,r),B=!0)},o(r){v(c.$$.fragment,r),v(a.$$.fragment,r),v(i.$$.fragment,r),v(_.$$.fragment,r),B=!1},d(r){r&&(d(t),d(e),d(s)),E(c),E(a),E(i),E(_),Q=!1,Y()}}}function ye(l){let t;return{c(){t=F("Logout")},l(n){t=N(n,"Logout")},m(n,e){I(n,t,e)},d(n){n&&d(t)}}}function Ce(l){let t,n;return t=new M({props:{$$slots:{default:[ye]},$$scope:{ctx:l}}}),{c(){C(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,s){L(t,e,s),n=!0},p(e,s){const o={};s&8192&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){v(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function De(l){let t;return{c(){t=F("Batal")},l(n){t=N(n,"Batal")},m(n,e){I(n,t,e)},d(n){n&&d(t)}}}function Le(l){let t,n;return t=new M({props:{$$slots:{default:[De]},$$scope:{ctx:l}}}),{c(){C(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,s){L(t,e,s),n=!0},p(e,s){const o={};s&8192&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){v(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function Ee(l){let t;return{c(){t=F("Login")},l(n){t=N(n,"Login")},m(n,e){I(n,t,e)},d(n){n&&d(t)}}}function Ie(l){let t,n;return t=new M({props:{$$slots:{default:[Ee]},$$scope:{ctx:l}}}),{c(){C(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,s){L(t,e,s),n=!0},p(e,s){const o={};s&8192&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){v(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function Ve(l){let t,n,e,s,o;const c=[we,ke],u=[];function m(a,f){return a[2]?a[2]?1:-1:0}return~(e=m(l))&&(s=u[e]=c[e](l)),{c(){t=R(),n=w("div"),s&&s.c(),this.h()},l(a){ce("svelte-1bel8ov",document.head).forEach(d),t=S(a),n=y(a,"DIV",{class:!0});var $=V(n);s&&s.l($),$.forEach(d),this.h()},h(){document.title="Login",x(n,"class","login mt-20 svelte-epcsw7")},m(a,f){I(a,t,f),I(a,n,f),~e&&u[e].m(n,null),o=!0},p(a,[f]){let $=e;e=m(a),e===$?~e&&u[e].p(a,f):(s&&(_e(),v(u[$],1,1,()=>{u[$]=null}),ge()),~e?(s=u[e],s?s.p(a,f):(s=u[e]=c[e](a),s.c()),b(s,1),s.m(n,null)):s=null)},i(a){o||(b(s),o=!0)},o(a){v(s),o=!1},d(a){a&&(d(t),d(n)),~e&&u[e].d()}}}function Te(l,t,n){let e,s="",o="",c="",u="";const m=he();z.subscribe(i=>n(2,s=i));let a=z.subscribe(i=>n(2,s=i));async function f(i){if(i.preventDefault(),!o||!c){alert("please enter your credentials");return}const T={"Content-Type":"application/json"};await ae.post("/v1/login",{name:o,password:c},{headers:T}).then(_=>_.data).then(_=>{const{access_token:B,refresh_token:Q}=_.tokens;z.update(Y=>o),se.update(Y=>Q),ne.update(Y=>B),$(),J("/")}).catch(_=>{console.log(_),n(3,u="User not found")})}async function $(){await ae.get("/admin/user",{headers:{"Content-Type":"application/json"}}).then(i=>i.data).then(i=>{z.update(T=>i.name),be.update(T=>i.role)}).catch(i=>{console.log(i)})}function g(){z.update(i=>""),ne.update(i=>""),se.update(i=>""),m.removeQueries(),J("/")}pe(a);function U(i){o=i,n(0,o)}function O(i){c=i,n(1,c)}const k=()=>J("/");return l.$$.update=()=>{l.$$.dirty&3&&n(4,e=o.length===0||c.length===0)},[o,c,s,u,e,f,g,U,O,k]}class Be extends re{constructor(t){super(),ie(this,t,Te,Ve,le,{})}}function je(l){let t,n;return t=new Be({}),{c(){C(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,s){L(t,e,s),n=!0},p:me,i(e){n||(b(t.$$.fragment,e),n=!0)},o(e){v(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}class Ne extends re{constructor(t){super(),ie(this,t,null,je,le,{})}}export{Ne as component};
