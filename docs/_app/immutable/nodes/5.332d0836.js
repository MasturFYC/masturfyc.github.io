import{s as st,a as E,f as r,l as nt,x as lt,d as y,c as L,g as c,h as N,r as U,m as ot,j as l,i as Z,y as a,I as $,z as P,S as it,n as rt,w as tt,A as ct}from"../chunks/scheduler.0ae656ff.js";import{g as dt}from"../chunks/globals.7f7f1b26.js";import{S as ut,i as ft}from"../chunks/index.e58d7550.js";import{f as pt}from"../chunks/fetch-api.03dee818.js";import{c as et}from"../chunks/browser.54b85836.js";const{document:at}=dt;function ht(i){let d,t,o,R="Label 103",p,w,h,v,H="Data: (format data: name1, name2, job, address, city)",I,m,z,u,x,V='<i class="fa-solid fa-wand-sparkles mr-2"></i> <span>Parse input to JSON</span>',n,e,_='<i class="fa-solid fa-upload mr-2"></i> <span>Load from CSV/JSON file</span>',s,f,O='<i class="fa-solid fa-download mr-2"></i> <span>Save data as JSON</span>',S,b,X='<i class="fa-solid fa-file-pdf mr-2"></i> <span>Download Label</span>',F,k,W,D,j,J=JSON.stringify(i[0],null,2)+"",B,q,G;return{c(){d=E(),t=r("section"),o=r("div"),o.textContent=R,p=E(),w=r("div"),h=r("label"),v=r("span"),v.textContent=H,I=E(),m=r("textarea"),z=E(),u=r("div"),x=r("button"),x.innerHTML=V,n=E(),e=r("button"),e.innerHTML=_,s=E(),f=r("button"),f.innerHTML=O,S=E(),b=r("button"),b.innerHTML=X,F=E(),k=r("input"),W=E(),D=r("div"),j=r("pre"),B=nt(J),this.h()},l(g){lt("svelte-1h2m8ab",at.head).forEach(y),d=L(g),t=c(g,"SECTION",{});var T=N(t);o=c(T,"DIV",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-1t6asrx"&&(o.textContent=R),p=L(T),w=c(T,"DIV",{class:!0});var K=N(w);h=c(K,"LABEL",{class:!0});var M=N(h);v=c(M,"SPAN",{class:!0,"data-svelte-h":!0}),U(v)!=="svelte-1pv1fq9"&&(v.textContent=H),I=L(M),m=c(M,"TEXTAREA",{class:!0,rows:!0}),N(m).forEach(y),M.forEach(y),K.forEach(y),z=L(T),u=c(T,"DIV",{class:!0});var C=N(u);x=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(x)!=="svelte-hlz625"&&(x.innerHTML=V),n=L(C),e=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1bm4c8c"&&(e.innerHTML=_),s=L(C),f=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(f)!=="svelte-5tb8c3"&&(f.innerHTML=O),S=L(C),b=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(b)!=="svelte-1oomt1i"&&(b.innerHTML=X),C.forEach(y),F=L(T),k=c(T,"INPUT",{id:!0,type:!0,style:!0,class:!0,accept:!0}),W=L(T),D=c(T,"DIV",{});var Q=N(D);j=c(Q,"PRE",{class:!0});var Y=N(j);B=ot(Y,J),Y.forEach(y),Q.forEach(y),T.forEach(y),this.h()},h(){at.title="Label-103",l(o,"class","title is-family-secondary"),l(v,"class","svelte-1enzdvs"),l(m,"class","textarea is-full svelte-1enzdvs"),l(m,"rows","6"),l(h,"class","svelte-1enzdvs"),l(w,"class","div-control svelte-1enzdvs"),l(x,"class","button is-success"),l(e,"class","button is-info"),l(f,"class","button is-warning"),l(b,"class","button is-link"),l(u,"class","buttons"),l(k,"id","input-file"),l(k,"type","file"),l(k,"style","display: none"),l(k,"class","button is-success mb-4 mt-2"),l(k,"accept","text/csv,application/json"),l(j,"class","p-0 div-pre svelte-1enzdvs")},m(g,A){Z(g,d,A),Z(g,t,A),a(t,o),a(t,p),a(t,w),a(w,h),a(h,v),a(h,I),a(h,m),$(m,i[1]),a(t,z),a(t,u),a(u,x),a(u,n),a(u,e),a(u,s),a(u,f),a(u,S),a(u,b),a(t,F),a(t,k),a(t,W),a(t,D),a(D,j),a(j,B),q||(G=[P(m,"input",i[5]),P(x,"click",i[6]),P(e,"click",i[7]),P(f,"click",i[8]),P(b,"click",i[9]),P(k,"change",it(i[10]))],q=!0)},p(g,[A]){A&2&&$(m,g[1]),A&1&&J!==(J=JSON.stringify(g[0],null,2)+"")&&rt(B,J)},i:tt,o:tt,d(g){g&&(y(d),y(t)),q=!1,ct(G)}}}const vt="id, name1, name2, job, address, city";function mt(i){const d=i.split(".");let t="";return d.length>1&&(t=d[d.length-1]),t}function _t(i){var d="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(i,null,3)),t=document.createElement("a");t.setAttribute("href",d),t.setAttribute("download","data-undangan.json"),document.body.appendChild(t),t.click(),t.remove()}function bt(i,d,t){let o=[];const R={col:3,row:4,labelWidth:64,labelHeight:32,pageWidth:137,pageHeight:200,horizontalPitch:65,verticalPitch:33};let p=`1,Udin,Fitri,,Ds. Plumbon,Indramayu
2,"Wardana, S.Pd",Uung,Pedagang,Blok Bojong RT. 15/06, Ds. Plumbon`;function w(n){et().fromString(vt+`
`+n).then(e=>{t(0,o=e)})}const h=n=>{const e=[];return n.forEach(_=>{e.push(Object.values(_).map(s=>typeof s=="string"&&s.indexOf(",")>0?'"'+s+'"':s).join(","))}),e.join(`
`)};async function v(n){const e=n.currentTarget;if(e&&e.files&&e.files[0]){const _=e.files[0],s=new FileReader;mt(_.name)==="csv"?s.onload=async f=>{var S;const O=((S=f.target)==null?void 0:S.result)??"";await et().fromString(O).then(b=>{t(0,o=b),t(1,p=O.substring(O.indexOf(`
`)+1))})}:s.onload=async f=>{var S;const O=((S=f.target)==null?void 0:S.result)??"";t(0,o=await JSON.parse(O)),t(1,p=h(o))},s.readAsText(_,"utf-8")}}const H=async()=>{const n="https://malvamelva.com/api/v1/label103";await pt.headers({Accept:"application/pdf","Content-Type":"application/json"}).url(n,!0).post({opt:{...R},data:o.map(e=>({...e,id:+e.id}))}).blob(e=>{var _=window.URL.createObjectURL(e),s=document.createElement("a");s.href=_,s.download="label103.pdf",s.click(),s.remove(),setTimeout(()=>window.URL.revokeObjectURL(_),1e3)}).catch(e=>{console.log(e)})};function I(){p=this.value,t(1,p)}return[o,p,w,v,H,I,()=>w(p),()=>{const n=document.getElementById("input-file");n==null||n.click()},()=>_t(o),()=>H(),n=>v(n)]}class St extends ut{constructor(d){super(),ft(this,d,bt,ht,st,{})}}export{St as component};
