import{s as nt,a as E,f as r,l as st,r as lt,d as y,c as L,g as c,h as N,u as A,m as ot,j as l,i as Z,v as a,I as $,w as P,S as it,n as rt,x as tt,y as ct}from"../chunks/scheduler.53f6c1ea.js";import{g as dt}from"../chunks/globals.7f7f1b26.js";import{S as ut,i as pt}from"../chunks/index.ed74fbf5.js";import{c as et}from"../chunks/browser.54b85836.js";import{f as ft}from"../chunks/fetch-api.03dee818.js";const{document:at}=dt;function ht(i){let d,t,o,R="Label 103",f,w,h,v,H="Data: (format data: name1, name2, job, address, city)",I,m,B,u,k,V='<i class="fa-solid fa-wand-sparkles mr-2"></i> <span>Parse input to JSON</span>',s,e,_='<i class="fa-solid fa-upload mr-2"></i> <span>Load from CSV/JSON file</span>',n,p,O='<i class="fa-solid fa-download mr-2"></i> <span>Save data as JSON</span>',x,b,X='<i class="fa-solid fa-file-pdf mr-2"></i> <span>Download Label</span>',q,S,F,D,j,J=JSON.stringify(i[0],null,2)+"",M,W,G;return{c(){d=E(),t=r("section"),o=r("div"),o.textContent=R,f=E(),w=r("div"),h=r("label"),v=r("span"),v.textContent=H,I=E(),m=r("textarea"),B=E(),u=r("div"),k=r("button"),k.innerHTML=V,s=E(),e=r("button"),e.innerHTML=_,n=E(),p=r("button"),p.innerHTML=O,x=E(),b=r("button"),b.innerHTML=X,q=E(),S=r("input"),F=E(),D=r("div"),j=r("pre"),M=st(J),this.h()},l(g){lt("svelte-1h2m8ab",at.head).forEach(y),d=L(g),t=c(g,"SECTION",{});var T=N(t);o=c(T,"DIV",{class:!0,"data-svelte-h":!0}),A(o)!=="svelte-cwkq35"&&(o.textContent=R),f=L(T),w=c(T,"DIV",{class:!0});var K=N(w);h=c(K,"LABEL",{class:!0});var z=N(h);v=c(z,"SPAN",{class:!0,"data-svelte-h":!0}),A(v)!=="svelte-1pv1fq9"&&(v.textContent=H),I=L(z),m=c(z,"TEXTAREA",{class:!0,rows:!0}),N(m).forEach(y),z.forEach(y),K.forEach(y),B=L(T),u=c(T,"DIV",{class:!0});var C=N(u);k=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),A(k)!=="svelte-hlz625"&&(k.innerHTML=V),s=L(C),e=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-1bm4c8c"&&(e.innerHTML=_),n=L(C),p=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),A(p)!=="svelte-5tb8c3"&&(p.innerHTML=O),x=L(C),b=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),A(b)!=="svelte-1oomt1i"&&(b.innerHTML=X),C.forEach(y),q=L(T),S=c(T,"INPUT",{id:!0,type:!0,style:!0,class:!0,accept:!0}),F=L(T),D=c(T,"DIV",{});var Q=N(D);j=c(Q,"PRE",{class:!0});var Y=N(j);M=ot(Y,J),Y.forEach(y),Q.forEach(y),T.forEach(y),this.h()},h(){at.title="Label-103",l(o,"class","title"),l(v,"class","svelte-1enzdvs"),l(m,"class","textarea is-full svelte-1enzdvs"),l(m,"rows","6"),l(h,"class","svelte-1enzdvs"),l(w,"class","div-control svelte-1enzdvs"),l(k,"class","button is-success"),l(e,"class","button is-info"),l(p,"class","button is-warning"),l(b,"class","button is-link"),l(u,"class","buttons"),l(S,"id","input-file"),l(S,"type","file"),l(S,"style","display: none"),l(S,"class","button is-success mb-4 mt-2"),l(S,"accept","text/csv,application/json"),l(j,"class","p-0 div-pre svelte-1enzdvs")},m(g,U){Z(g,d,U),Z(g,t,U),a(t,o),a(t,f),a(t,w),a(w,h),a(h,v),a(h,I),a(h,m),$(m,i[1]),a(t,B),a(t,u),a(u,k),a(u,s),a(u,e),a(u,n),a(u,p),a(u,x),a(u,b),a(t,q),a(t,S),a(t,F),a(t,D),a(D,j),a(j,M),W||(G=[P(m,"input",i[5]),P(k,"click",i[6]),P(e,"click",i[7]),P(p,"click",i[8]),P(b,"click",i[9]),P(S,"change",it(i[10]))],W=!0)},p(g,[U]){U&2&&$(m,g[1]),U&1&&J!==(J=JSON.stringify(g[0],null,2)+"")&&rt(M,J)},i:tt,o:tt,d(g){g&&(y(d),y(t)),W=!1,ct(G)}}}const vt="id, name1, name2, job, address, city";function mt(i){const d=i.split(".");let t="";return d.length>1&&(t=d[d.length-1]),t}function _t(i){var d="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(i,null,3)),t=document.createElement("a");t.setAttribute("href",d),t.setAttribute("download","data-undangan.json"),document.body.appendChild(t),t.click(),t.remove()}function bt(i,d,t){let o=[];const R={col:3,row:4,labelWidth:64,labelHeight:32,pageWidth:137,pageHeight:200,horizontalPitch:65,verticalPitch:33};let f=`1,Udin,Fitri,,Ds. Plumbon,Indramayu
2,"Wardana, S.Pd",Uung,Pedagang,Blok Bojong RT. 15/06, Ds. Plumbon`;function w(s){et().fromString(vt+`
`+s).then(e=>{t(0,o=e)})}const h=s=>{const e=[];return s.forEach(_=>{e.push(Object.values(_).map(n=>typeof n=="string"&&n.indexOf(",")>0?'"'+n+'"':n).join(","))}),e.join(`
`)};async function v(s){const e=s.currentTarget;if(e&&e.files&&e.files[0]){const _=e.files[0],n=new FileReader;mt(_.name)==="csv"?n.onload=async p=>{var x;const O=((x=p.target)==null?void 0:x.result)??"";await et().fromString(O).then(b=>{t(0,o=b),t(1,f=O.substring(O.indexOf(`
`)+1))})}:n.onload=async p=>{var x;const O=((x=p.target)==null?void 0:x.result)??"";t(0,o=await JSON.parse(O)),t(1,f=h(o))},n.readAsText(_,"utf-8")}}const H=async()=>{const s="https://malvamelva.com/api/v1/label103";await ft.headers({Accept:"application/pdf","Content-Type":"application/json"}).url(s,!0).post({opt:{...R},data:o.map(e=>({...e,id:+e.id}))}).blob(e=>{var _=window.URL.createObjectURL(e),n=document.createElement("a");n.href=_,n.download="label103.pdf",n.click(),n.remove(),setTimeout(()=>window.URL.revokeObjectURL(_),1e3)}).catch(e=>{console.log(e)})};function I(){f=this.value,t(1,f)}return[o,f,w,v,H,I,()=>w(f),()=>{const s=document.getElementById("input-file");s==null||s.click()},()=>_t(o),()=>H(),s=>v(s)]}class xt extends ut{constructor(d){super(),pt(this,d,bt,ht,nt,{})}}export{xt as component};
