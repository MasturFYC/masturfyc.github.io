import{s as ft,n as st,r as ht}from"../chunks/scheduler.7dbf7838.js";import{S as pt,i as _t,g as i,s as w,h as c,j as O,x as q,c as j,f as b,k as v,a as ut,z as e,A as ot,B as W,F as vt,m as Y,n as X,o as G}from"../chunks/index.81cd449f.js";import{e as rt,u as mt,d as bt}from"../chunks/each.d8de70c7.js";import{c as it}from"../chunks/browser.54b85836.js";import{f as gt}from"../chunks/fetch-api.25de0291.js";function ct(u,a,t){const f=u.slice();return f[13]=a[t],f}function dt(u,a){let t,f,A=a[13].id+"",p,g,T,N=a[13].name1+"",H,k,M,h=a[13].name2+"",L,J,B,s=a[13].job+"",o,E,l,S=a[13].address+"",C,_,U,I=a[13].city+"",D,z;return{key:u,first:null,c(){t=i("tr"),f=i("td"),p=Y(A),g=w(),T=i("td"),H=Y(N),k=w(),M=i("td"),L=Y(h),J=w(),B=i("td"),o=Y(s),E=w(),l=i("td"),C=Y(S),_=w(),U=i("td"),D=Y(I),z=w(),this.h()},l(m){t=c(m,"TR",{});var n=O(t);f=c(n,"TD",{});var K=O(f);p=X(K,A),K.forEach(b),g=j(n),T=c(n,"TD",{});var F=O(T);H=X(F,N),F.forEach(b),k=j(n),M=c(n,"TD",{});var P=O(M);L=X(P,h),P.forEach(b),J=j(n),B=c(n,"TD",{});var y=O(B);o=X(y,s),y.forEach(b),E=j(n),l=c(n,"TD",{});var Q=O(l);C=X(Q,S),Q.forEach(b),_=j(n),U=c(n,"TD",{});var V=O(U);D=X(V,I),V.forEach(b),z=j(n),n.forEach(b),this.h()},h(){this.first=t},m(m,n){ut(m,t,n),e(t,f),e(f,p),e(t,g),e(t,T),e(T,H),e(t,k),e(t,M),e(M,L),e(t,J),e(t,B),e(B,o),e(t,E),e(t,l),e(l,C),e(t,_),e(t,U),e(U,D),e(t,z)},p(m,n){a=m,n&1&&A!==(A=a[13].id+"")&&G(p,A),n&1&&N!==(N=a[13].name1+"")&&G(H,N),n&1&&h!==(h=a[13].name2+"")&&G(L,h),n&1&&s!==(s=a[13].job+"")&&G(o,s),n&1&&S!==(S=a[13].address+"")&&G(C,S),n&1&&I!==(I=a[13].city+"")&&G(D,I)},d(m){m&&b(t)}}}function Tt(u){let a,t,f="Label 103",A,p,g,T,N="Data: (format data: name1, name2, job, address, city)",H,k,M,h,L,J='<i class="fa-solid fa-wand-sparkles mr-2"></i> <span>Parse input to JSON</span>',B,s,o='<i class="fa-solid fa-upload mr-2"></i> <span>Load from CSV/JSON file</span>',E,l,S='<i class="fa-solid fa-download mr-2"></i> <span>Save data as JSON</span>',C,_,U='<i class="fa-solid fa-file-pdf mr-2"></i> <span>Download Label</span>',I,D,z,m,n,K="<tr><th>ID</th> <th>NAME1</th> <th>NAME2</th> <th>JOB</th> <th>ADDRESS</th> <th>CITY</th></tr>",F,P,y=[],Q=new Map,V,at,Z=rt(u[0]);const lt=d=>d[13].id;for(let d=0;d<Z.length;d+=1){let r=ct(u,Z,d),x=lt(r);Q.set(x,y[d]=dt(x,r))}return{c(){a=i("section"),t=i("div"),t.textContent=f,A=w(),p=i("div"),g=i("label"),T=i("span"),T.textContent=N,H=w(),k=i("textarea"),M=w(),h=i("div"),L=i("button"),L.innerHTML=J,B=w(),s=i("button"),s.innerHTML=o,E=w(),l=i("button"),l.innerHTML=S,C=w(),_=i("button"),_.innerHTML=U,I=w(),D=i("input"),z=w(),m=i("table"),n=i("thead"),n.innerHTML=K,F=w(),P=i("tbody");for(let d=0;d<y.length;d+=1)y[d].c();this.h()},l(d){a=c(d,"SECTION",{});var r=O(a);t=c(r,"DIV",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-cwkq35"&&(t.textContent=f),A=j(r),p=c(r,"DIV",{class:!0});var x=O(p);g=c(x,"LABEL",{class:!0});var $=O(g);T=c($,"SPAN",{class:!0,"data-svelte-h":!0}),q(T)!=="svelte-1pv1fq9"&&(T.textContent=N),H=j($),k=c($,"TEXTAREA",{class:!0,rows:!0}),O(k).forEach(b),$.forEach(b),x.forEach(b),M=j(r),h=c(r,"DIV",{class:!0});var R=O(h);L=c(R,"BUTTON",{class:!0,"data-svelte-h":!0}),q(L)!=="svelte-hlz625"&&(L.innerHTML=J),B=j(R),s=c(R,"BUTTON",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-1bm4c8c"&&(s.innerHTML=o),E=j(R),l=c(R,"BUTTON",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-5tb8c3"&&(l.innerHTML=S),C=j(R),_=c(R,"BUTTON",{class:!0,"data-svelte-h":!0}),q(_)!=="svelte-1oomt1i"&&(_.innerHTML=U),R.forEach(b),I=j(r),D=c(r,"INPUT",{id:!0,type:!0,style:!0,class:!0,accept:!0}),z=j(r),m=c(r,"TABLE",{class:!0});var tt=O(m);n=c(tt,"THEAD",{"data-svelte-h":!0}),q(n)!=="svelte-qcekwl"&&(n.innerHTML=K),F=j(tt),P=c(tt,"TBODY",{});var nt=O(P);for(let et=0;et<y.length;et+=1)y[et].l(nt);nt.forEach(b),tt.forEach(b),r.forEach(b),this.h()},h(){v(t,"class","title"),v(T,"class","svelte-pdozj3"),v(k,"class","textarea is-full svelte-pdozj3"),v(k,"rows","10"),v(g,"class","svelte-pdozj3"),v(p,"class","div-control svelte-pdozj3"),v(L,"class","button is-success"),v(s,"class","button is-info"),v(l,"class","button is-warning"),v(_,"class","button is-link"),v(h,"class","buttons"),v(D,"id","input-file"),v(D,"type","file"),v(D,"style","display: none"),v(D,"class","button is-success mb-4 mt-2"),v(D,"accept","text/csv,application/json"),v(m,"class","table is-fullwidth")},m(d,r){ut(d,a,r),e(a,t),e(a,A),e(a,p),e(p,g),e(g,T),e(g,H),e(g,k),ot(k,u[1]),e(a,M),e(a,h),e(h,L),e(h,B),e(h,s),e(h,E),e(h,l),e(h,C),e(h,_),e(a,I),e(a,D),e(a,z),e(a,m),e(m,n),e(m,F),e(m,P);for(let x=0;x<y.length;x+=1)y[x]&&y[x].m(P,null);V||(at=[W(k,"input",u[5]),W(L,"click",u[6]),W(s,"click",u[7]),W(l,"click",u[8]),W(_,"click",u[9]),W(D,"change",vt(u[10]))],V=!0)},p(d,[r]){r&2&&ot(k,d[1]),r&1&&(Z=rt(d[0]),y=mt(y,r,lt,1,d,Z,Q,P,bt,dt,null,ct))},i:st,o:st,d(d){d&&b(a);for(let r=0;r<y.length;r+=1)y[r].d();V=!1,ht(at)}}}const kt="id, name1, name2, job, address, city";function Et(u){const a=u.split(".");let t="";return a.length>1&&(t=a[a.length-1]),t}function yt(u){var a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(u,null,3)),t=document.createElement("a");t.setAttribute("href",a),t.setAttribute("download","data-undangan.json"),document.body.appendChild(t),t.click(),t.remove()}function wt(u,a,t){let f=[];const A={col:3,row:4,labelWidth:64,labelHeight:32,pageWidth:137,pageHeight:200,horizontalPitch:65,verticalPitch:33};let p=`1,Udin,Fitri,,Ds. Plumbon,Indramayu
2,"Wardana, S.Pd",Uung,Pedagang,Blok Bojong RT. 15/06, Ds. Plumbon`;function g(s){it().fromString(kt+`
`+s).then(o=>{t(0,f=o)})}const T=s=>{const o=[];return s.forEach(E=>{o.push(Object.values(E).map(l=>typeof l=="string"&&l.indexOf(",")>0?'"'+l+'"':l).join(","))}),o.join(`
`)};async function N(s){const o=s.currentTarget;if(o&&o.files&&o.files[0]){const E=o.files[0],l=new FileReader;Et(E.name)==="csv"?l.onload=async S=>{var _;const C=((_=S.target)==null?void 0:_.result)??"";await it().fromString(C).then(U=>{t(0,f=U),t(1,p=C.substring(C.indexOf(`
`)+1))})}:l.onload=async S=>{var _;const C=((_=S.target)==null?void 0:_.result)??"";t(0,f=await JSON.parse(C)),t(1,p=T(f))},l.readAsText(E,"utf-8")}}const H=async()=>{const s="https://malvamelva.com/api/v1/label103";await gt.headers({Accept:"application/pdf","Content-Type":"application/json"}).url(s,!0).post({opt:{...A},data:f.map(o=>({...o,id:+o.id}))}).blob(o=>{var E=window.URL.createObjectURL(o),l=document.createElement("a");l.href=E,l.download="label103.pdf",l.click(),l.remove(),setTimeout(()=>window.URL.revokeObjectURL(E),1e3)}).catch(o=>{console.log(o)})};function k(){p=this.value,t(1,p)}return[f,p,g,N,H,k,()=>g(p),()=>{const s=document.getElementById("input-file");s==null||s.click()},()=>yt(f),()=>H(),s=>N(s)]}class St extends pt{constructor(a){super(),_t(this,a,wt,Tt,ft,{})}}export{St as component};
