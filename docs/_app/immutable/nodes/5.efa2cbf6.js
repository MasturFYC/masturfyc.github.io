import{s as st,a as L,f as r,l as nt,v as lt,d as y,c as O,g as c,h as N,r as U,m as ot,j as n,i as Z,x as a,J as $,z as P,T as it,n as rt,u as tt,A as ct}from"../chunks/scheduler.6ec384de.js";import{g as dt}from"../chunks/globals.7f7f1b26.js";import{S as ut,i as pt}from"../chunks/index.2b0a6367.js";import{f as ft}from"../chunks/fetch-api.03dee818.js";import{c as et}from"../chunks/browser.54b85836.js";const{document:at}=dt;function ht(i){let d,t,o,R="Label 103",f,x,h,v,H="Data: (format data: name1, name2, job, address, city)",J,m,z,u,k,V='<i class="fa-solid fa-wand-sparkles mr-2"></i> <span>Parse input to JSON</span>',l,e,_='<i class="fa-solid fa-upload mr-2"></i> <span>Load from CSV/JSON file</span>',s,p,S='<i class="fa-solid fa-download mr-2"></i> <span>Save data as JSON</span>',w,b,X='<i class="fa-solid fa-file-pdf mr-2"></i> <span>Download Label</span>',F,E,W,D,j,I=JSON.stringify(i[0],null,2)+"",B,q,G;return{c(){d=L(),t=r("section"),o=r("div"),o.textContent=R,f=L(),x=r("div"),h=r("label"),v=r("span"),v.textContent=H,J=L(),m=r("textarea"),z=L(),u=r("div"),k=r("button"),k.innerHTML=V,l=L(),e=r("button"),e.innerHTML=_,s=L(),p=r("button"),p.innerHTML=S,w=L(),b=r("button"),b.innerHTML=X,F=L(),E=r("input"),W=L(),D=r("div"),j=r("pre"),B=nt(I),this.h()},l(g){lt("svelte-1h2m8ab",at.head).forEach(y),d=O(g),t=c(g,"SECTION",{class:!0});var T=N(t);o=c(T,"DIV",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-1t6asrx"&&(o.textContent=R),f=O(T),x=c(T,"DIV",{class:!0});var K=N(x);h=c(K,"LABEL",{class:!0});var M=N(h);v=c(M,"SPAN",{class:!0,"data-svelte-h":!0}),U(v)!=="svelte-1pv1fq9"&&(v.textContent=H),J=O(M),m=c(M,"TEXTAREA",{class:!0,rows:!0}),N(m).forEach(y),M.forEach(y),K.forEach(y),z=O(T),u=c(T,"DIV",{class:!0});var C=N(u);k=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(k)!=="svelte-hlz625"&&(k.innerHTML=V),l=O(C),e=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1bm4c8c"&&(e.innerHTML=_),s=O(C),p=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-5tb8c3"&&(p.innerHTML=S),w=O(C),b=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(b)!=="svelte-1oomt1i"&&(b.innerHTML=X),C.forEach(y),F=O(T),E=c(T,"INPUT",{id:!0,type:!0,style:!0,class:!0,accept:!0}),W=O(T),D=c(T,"DIV",{});var Q=N(D);j=c(Q,"PRE",{class:!0});var Y=N(j);B=ot(Y,I),Y.forEach(y),Q.forEach(y),T.forEach(y),this.h()},h(){at.title="Label-103",n(o,"class","title is-family-secondary"),n(v,"class","svelte-1enzdvs"),n(m,"class","textarea is-full svelte-1enzdvs"),n(m,"rows","6"),n(h,"class","svelte-1enzdvs"),n(x,"class","div-control svelte-1enzdvs"),n(k,"class","button is-success"),n(e,"class","button is-info"),n(p,"class","button is-warning"),n(b,"class","button is-link"),n(u,"class","buttons"),n(E,"id","input-file"),n(E,"type","file"),n(E,"style","display: none"),n(E,"class","button is-success mb-4 mt-2"),n(E,"accept","text/csv,application/json"),n(j,"class","p-0 div-pre svelte-1enzdvs"),n(t,"class","container is-max-desktop")},m(g,A){Z(g,d,A),Z(g,t,A),a(t,o),a(t,f),a(t,x),a(x,h),a(h,v),a(h,J),a(h,m),$(m,i[1]),a(t,z),a(t,u),a(u,k),a(u,l),a(u,e),a(u,s),a(u,p),a(u,w),a(u,b),a(t,F),a(t,E),a(t,W),a(t,D),a(D,j),a(j,B),q||(G=[P(m,"input",i[5]),P(k,"click",i[6]),P(e,"click",i[7]),P(p,"click",i[8]),P(b,"click",i[9]),P(E,"change",it(i[10]))],q=!0)},p(g,[A]){A&2&&$(m,g[1]),A&1&&I!==(I=JSON.stringify(g[0],null,2)+"")&&rt(B,I)},i:tt,o:tt,d(g){g&&(y(d),y(t)),q=!1,ct(G)}}}const vt="id, name1, name2, job, address, city";function mt(i){const d=i.split(".");let t="";return d.length>1&&(t=d[d.length-1]),t}function _t(i){var d="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(i,null,3)),t=document.createElement("a");t.setAttribute("href",d),t.setAttribute("download","data-undangan.json"),document.body.appendChild(t),t.click(),t.remove()}function bt(i,d,t){let o=[];const R={col:3,row:4,labelWidth:64,labelHeight:32,pageWidth:137,pageHeight:200,horizontalPitch:65,verticalPitch:33};let f=`1,Udin,Fitri,,Ds. Plumbon,Indramayu
2,"Wardana, S.Pd",Uung,Pedagang,Blok Bojong RT. 15/06, Ds. Plumbon`;function x(l){et().fromString(vt+`
`+l).then(e=>{t(0,o=e)})}const h=l=>{const e=[];return l.forEach(_=>{e.push(Object.values(_).map(s=>typeof s=="string"&&s.indexOf(",")>0?'"'+s+'"':s).join(","))}),e.join(`
`)};async function v(l){const e=l.currentTarget;if(e&&e.files&&e.files[0]){const _=e.files[0],s=new FileReader;mt(_.name)==="csv"?s.onload=async p=>{var w;const S=((w=p.target)==null?void 0:w.result)??"";await et().fromString(S).then(b=>{t(0,o=b),t(1,f=S.substring(S.indexOf(`
`)+1))})}:s.onload=async p=>{var w;const S=((w=p.target)==null?void 0:w.result)??"";t(0,o=await JSON.parse(S)),t(1,f=h(o))},s.readAsText(_,"utf-8")}}const H=async()=>{const l="https://malvamelva.com/api/v1/label103";await ft.headers({Accept:"application/pdf","Content-Type":"application/json"}).url(l,!0).post({opt:{...R},data:o.map(e=>({...e,id:+e.id}))}).blob(e=>{var _=window.URL.createObjectURL(e),s=document.createElement("a");s.href=_,s.download="label103.pdf",s.click(),s.remove(),setTimeout(()=>window.URL.revokeObjectURL(_),1e3)}).catch(e=>{console.log(e)})};function J(){f=this.value,t(1,f)}return[o,f,x,v,H,J,()=>x(f),()=>{const l=document.getElementById("input-file");l==null||l.click()},()=>_t(o),()=>H(),l=>v(l)]}class wt extends ut{constructor(d){super(),pt(this,d,bt,ht,st,{})}}export{wt as component};
