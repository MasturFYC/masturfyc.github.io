import{s as nt,n as Z,r as st}from"../chunks/scheduler.95ca1de1.js";import{S as lt,i as ot,s as L,g as r,m as it,x as rt,f as y,c as O,h as c,j as N,y as U,n as ct,k as l,a as $,z as a,C as tt,A as P,G as dt,o as ut}from"../chunks/index.541b2b8c.js";import{g as pt,f as ft}from"../chunks/fetch-api.1021b51e.js";import{c as et}from"../chunks/browser.54b85836.js";const{document:at}=pt;function ht(i){let d,t,o,R="Label 103",f,k,h,v,H="Data: (format data: name1, name2, job, address, city)",D,_,z,u,w,V='<i class="fa-solid fa-wand-sparkles mr-2"></i> <span>Parse input to JSON</span>',s,e,m='<i class="fa-solid fa-upload mr-2"></i> <span>Load from CSV/JSON file</span>',n,p,S='<i class="fa-solid fa-download mr-2"></i> <span>Save data as JSON</span>',x,b,G='<i class="fa-solid fa-file-pdf mr-2"></i> <span>Download Label</span>',q,E,F,I,j,J=JSON.stringify(i[0],null,2)+"",B,W,X;return{c(){d=L(),t=r("section"),o=r("div"),o.textContent=R,f=L(),k=r("div"),h=r("label"),v=r("span"),v.textContent=H,D=L(),_=r("textarea"),z=L(),u=r("div"),w=r("button"),w.innerHTML=V,s=L(),e=r("button"),e.innerHTML=m,n=L(),p=r("button"),p.innerHTML=S,x=L(),b=r("button"),b.innerHTML=G,q=L(),E=r("input"),F=L(),I=r("div"),j=r("pre"),B=it(J),this.h()},l(g){rt("svelte-1h2m8ab",at.head).forEach(y),d=O(g),t=c(g,"SECTION",{});var T=N(t);o=c(T,"DIV",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-cwkq35"&&(o.textContent=R),f=O(T),k=c(T,"DIV",{class:!0});var K=N(k);h=c(K,"LABEL",{class:!0});var M=N(h);v=c(M,"SPAN",{class:!0,"data-svelte-h":!0}),U(v)!=="svelte-1pv1fq9"&&(v.textContent=H),D=O(M),_=c(M,"TEXTAREA",{class:!0,rows:!0}),N(_).forEach(y),M.forEach(y),K.forEach(y),z=O(T),u=c(T,"DIV",{class:!0});var C=N(u);w=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(w)!=="svelte-hlz625"&&(w.innerHTML=V),s=O(C),e=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1bm4c8c"&&(e.innerHTML=m),n=O(C),p=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-5tb8c3"&&(p.innerHTML=S),x=O(C),b=c(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(b)!=="svelte-1oomt1i"&&(b.innerHTML=G),C.forEach(y),q=O(T),E=c(T,"INPUT",{id:!0,type:!0,style:!0,class:!0,accept:!0}),F=O(T),I=c(T,"DIV",{});var Q=N(I);j=c(Q,"PRE",{class:!0});var Y=N(j);B=ct(Y,J),Y.forEach(y),Q.forEach(y),T.forEach(y),this.h()},h(){at.title="Label-103",l(o,"class","title"),l(v,"class","svelte-1enzdvs"),l(_,"class","textarea is-full svelte-1enzdvs"),l(_,"rows","6"),l(h,"class","svelte-1enzdvs"),l(k,"class","div-control svelte-1enzdvs"),l(w,"class","button is-success"),l(e,"class","button is-info"),l(p,"class","button is-warning"),l(b,"class","button is-link"),l(u,"class","buttons"),l(E,"id","input-file"),l(E,"type","file"),l(E,"style","display: none"),l(E,"class","button is-success mb-4 mt-2"),l(E,"accept","text/csv,application/json"),l(j,"class","p-0 div-pre svelte-1enzdvs")},m(g,A){$(g,d,A),$(g,t,A),a(t,o),a(t,f),a(t,k),a(k,h),a(h,v),a(h,D),a(h,_),tt(_,i[1]),a(t,z),a(t,u),a(u,w),a(u,s),a(u,e),a(u,n),a(u,p),a(u,x),a(u,b),a(t,q),a(t,E),a(t,F),a(t,I),a(I,j),a(j,B),W||(X=[P(_,"input",i[5]),P(w,"click",i[6]),P(e,"click",i[7]),P(p,"click",i[8]),P(b,"click",i[9]),P(E,"change",dt(i[10]))],W=!0)},p(g,[A]){A&2&&tt(_,g[1]),A&1&&J!==(J=JSON.stringify(g[0],null,2)+"")&&ut(B,J)},i:Z,o:Z,d(g){g&&(y(d),y(t)),W=!1,st(X)}}}const vt="id, name1, name2, job, address, city";function _t(i){const d=i.split(".");let t="";return d.length>1&&(t=d[d.length-1]),t}function mt(i){var d="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(i,null,3)),t=document.createElement("a");t.setAttribute("href",d),t.setAttribute("download","data-undangan.json"),document.body.appendChild(t),t.click(),t.remove()}function bt(i,d,t){let o=[];const R={col:3,row:4,labelWidth:64,labelHeight:32,pageWidth:137,pageHeight:200,horizontalPitch:65,verticalPitch:33};let f=`1,Udin,Fitri,,Ds. Plumbon,Indramayu
2,"Wardana, S.Pd",Uung,Pedagang,Blok Bojong RT. 15/06, Ds. Plumbon`;function k(s){et().fromString(vt+`
`+s).then(e=>{t(0,o=e)})}const h=s=>{const e=[];return s.forEach(m=>{e.push(Object.values(m).map(n=>typeof n=="string"&&n.indexOf(",")>0?'"'+n+'"':n).join(","))}),e.join(`
`)};async function v(s){const e=s.currentTarget;if(e&&e.files&&e.files[0]){const m=e.files[0],n=new FileReader;_t(m.name)==="csv"?n.onload=async p=>{var x;const S=((x=p.target)==null?void 0:x.result)??"";await et().fromString(S).then(b=>{t(0,o=b),t(1,f=S.substring(S.indexOf(`
`)+1))})}:n.onload=async p=>{var x;const S=((x=p.target)==null?void 0:x.result)??"";t(0,o=await JSON.parse(S)),t(1,f=h(o))},n.readAsText(m,"utf-8")}}const H=async()=>{const s="https://malvamelva.com/api/v1/label103";await ft.headers({Accept:"application/pdf","Content-Type":"application/json"}).url(s,!0).post({opt:{...R},data:o.map(e=>({...e,id:+e.id}))}).blob(e=>{var m=window.URL.createObjectURL(e),n=document.createElement("a");n.href=m,n.download="label103.pdf",n.click(),n.remove(),setTimeout(()=>window.URL.revokeObjectURL(m),1e3)}).catch(e=>{console.log(e)})};function D(){f=this.value,t(1,f)}return[o,f,k,v,H,D,()=>k(f),()=>{const s=document.getElementById("input-file");s==null||s.click()},()=>mt(o),()=>H(),s=>v(s)]}class wt extends lt{constructor(d){super(),ot(this,d,bt,ht,nt,{})}}export{wt as component};
