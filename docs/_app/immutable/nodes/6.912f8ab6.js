import{s as qe,n as Se,r as Je}from"../chunks/scheduler.7dbf7838.js";import{S as ze,i as Ge,g as s,s as E,m as R,y as Ke,h as o,f as r,c as A,j as b,x as Y,n as H,k as v,z as e,a as W,B as Q,o as oe,C as Xe,F as Ye,A as Oe}from"../chunks/index.81cd449f.js";import{g as Qe}from"../chunks/globals.7f7f1b26.js";import{e as Re}from"../chunks/each.d8de70c7.js";import{c as He}from"../chunks/browser.54b85836.js";import{f as We}from"../chunks/fetch-api.25de0291.js";const{document:be}=Qe;function je(a,t,l){const n=a.slice();return n[21]=t[l],n[22]=t,n[23]=l,n}function Ze(a){let t,l,n,h,i,k,y,m;return{c(){t=s("input"),l=E(),n=s("span"),h=R("CSV Format ("),i=R(ue),k=R(")"),this.h()},l(d){t=o(d,"INPUT",{type:!0,class:!0,accept:!0}),l=A(d),n=o(d,"SPAN",{});var c=b(n);h=H(c,"CSV Format ("),i=H(c,ue),k=H(c,")"),c.forEach(r),this.h()},h(){v(t,"type","file"),v(t,"class","mb-4 mt-2"),v(t,"accept","text/csv")},m(d,c){W(d,t,c),W(d,l,c),W(d,n,c),e(n,h),e(n,i),e(n,k),y||(m=Q(t,"change",Ye(a[14])),y=!0)},p:Se,d(d){d&&(r(t),r(l),r(n)),y=!1,m()}}}function $e(a){let t,l,n,h,i,k,y,m,d,c,D="Parse to JSON",V,N;return{c(){t=s("div"),l=s("label"),n=s("span"),h=R("CSV Text (comma delimited) format: ("),i=R(ue),k=R("):"),y=E(),m=s("textarea"),d=E(),c=s("button"),c.textContent=D,this.h()},l(g){t=o(g,"DIV",{class:!0});var T=b(t);l=o(T,"LABEL",{class:!0});var w=b(l);n=o(w,"SPAN",{});var U=b(n);h=H(U,"CSV Text (comma delimited) format: ("),i=H(U,ue),k=H(U,"):"),U.forEach(r),y=A(w),m=o(w,"TEXTAREA",{class:!0,rows:!0}),b(m).forEach(r),w.forEach(r),T.forEach(r),d=A(g),c=o(g,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(c)!=="svelte-1zd0bm"&&(c.textContent=D),this.h()},h(){v(m,"class","textarea column is-full svelte-i42n74"),v(m,"rows","10"),v(l,"class","label svelte-i42n74"),v(t,"class","field block"),v(c,"class","button is-link block")},m(g,T){W(g,t,T),e(t,l),e(l,n),e(n,h),e(n,i),e(n,k),e(l,y),e(l,m),Oe(m,a[3]),W(g,d,T),W(g,c,T),V||(N=[Q(m,"input",a[12]),Q(c,"click",a[13])],V=!0)},p(g,T){T&8&&Oe(m,g[3])},d(g){g&&(r(t),r(d),r(c)),V=!1,Je(N)}}}function Fe(a){let t,l,n,h,i,k=a[21].noSl+"",y,m,d,c=a[21].name+"",D,V,N,g=a[21].address+"",T,w,U,j=a[21].city+"",G,K,I,O=a[21].cabang+"",C,F,_,S;function M(){a[17].call(n,a[22],a[23])}return{c(){t=s("tr"),l=s("td"),n=s("input"),h=E(),i=s("td"),y=R(k),m=E(),d=s("td"),D=R(c),V=E(),N=s("td"),T=R(g),w=E(),U=s("td"),G=R(j),K=E(),I=s("td"),C=R(O),F=E(),this.h()},l(x){t=o(x,"TR",{});var u=b(t);l=o(u,"TD",{});var L=b(l);n=o(L,"INPUT",{type:!0}),L.forEach(r),h=A(u),i=o(u,"TD",{});var Z=b(i);y=H(Z,k),Z.forEach(r),m=A(u),d=o(u,"TD",{});var $=b(d);D=H($,c),$.forEach(r),V=A(u),N=o(u,"TD",{});var J=b(N);T=H(J,g),J.forEach(r),w=A(u),U=o(u,"TD",{});var re=b(U);G=H(re,j),re.forEach(r),K=A(u),I=o(u,"TD",{});var te=b(I);C=H(te,O),te.forEach(r),F=A(u),u.forEach(r),this.h()},h(){v(n,"type","checkbox")},m(x,u){W(x,t,u),e(t,l),e(l,n),n.checked=a[21].selected,e(t,h),e(t,i),e(i,y),e(t,m),e(t,d),e(d,D),e(t,V),e(t,N),e(N,T),e(t,w),e(t,U),e(U,G),e(t,K),e(t,I),e(I,C),e(t,F),_||(S=Q(n,"change",M),_=!0)},p(x,u){a=x,u&2&&(n.checked=a[21].selected),u&2&&k!==(k=a[21].noSl+"")&&oe(y,k),u&2&&c!==(c=a[21].name+"")&&oe(D,c),u&2&&g!==(g=a[21].address+"")&&oe(T,g),u&2&&j!==(j=a[21].city+"")&&oe(G,j),u&2&&O!==(O=a[21].cabang+"")&&oe(C,O)},d(x){x&&r(t),_=!1,S()}}}function et(a){let t,l,n,h,i,k="Kartu PDAM",y,m,d,c,D,V="CSV Text",N,g,T,w,U="File",j,G,K,I,O,C,F,_,S,M,x="No. SL",u,L,Z="NAMA",$,J,re="ALAMAT",te,le,De="CABANG",ge,ae,we="ALAMAT CABANG",Te,ne,Ce,ee,X,Ee,fe,Ae,ce,ie=a[5]?"Please wait....":"",he,ke,xe;function Ne(f,B){return f[0]==="text"?$e:Ze}let _e=Ne(a),z=_e(a),se=Re(a[1]),P=[];for(let f=0;f<se.length;f+=1)P[f]=Fe(je(a,se,f));return{c(){t=s("meta"),l=s("meta"),n=E(),h=s("section"),i=s("div"),i.textContent=k,y=E(),m=s("div"),d=s("ul"),c=s("li"),D=s("a"),D.textContent=V,g=E(),T=s("li"),w=s("a"),w.textContent=U,G=E(),z.c(),K=E(),I=s("table"),O=s("thead"),C=s("tr"),F=s("th"),_=s("input"),S=E(),M=s("th"),M.textContent=x,u=E(),L=s("th"),L.textContent=Z,$=E(),J=s("th"),J.textContent=re,te=E(),le=s("th"),le.textContent=De,ge=E(),ae=s("th"),ae.textContent=we,Te=E(),ne=s("tbody");for(let f=0;f<P.length;f+=1)P[f].c();Ce=E(),ee=s("div"),X=s("button"),Ee=R("Download"),Ae=E(),ce=s("p"),he=R(ie),this.h()},l(f){const B=Ke("svelte-15hq90y",be.head);t=o(B,"META",{property:!0,content:!0}),l=o(B,"META",{name:!0,content:!0}),B.forEach(r),n=A(f),h=o(f,"SECTION",{});var p=b(h);i=o(p,"DIV",{class:!0,"data-svelte-h":!0}),Y(i)!=="svelte-14g43s4"&&(i.textContent=k),y=A(p),m=o(p,"DIV",{class:!0});var de=b(m);d=o(de,"UL",{});var pe=b(d);c=o(pe,"LI",{class:!0});var Pe=b(c);D=o(Pe,"A",{href:!0,"data-svelte-h":!0}),Y(D)!=="svelte-q1uj1g"&&(D.textContent=V),Pe.forEach(r),g=A(pe),T=o(pe,"LI",{class:!0});var Ie=b(T);w=o(Ie,"A",{href:!0,"data-svelte-h":!0}),Y(w)!=="svelte-1a2fnp4"&&(w.textContent=U),Ie.forEach(r),pe.forEach(r),de.forEach(r),G=A(p),z.l(p),K=A(p),I=o(p,"TABLE",{class:!0});var me=b(I);O=o(me,"THEAD",{});var Le=b(O);C=o(Le,"TR",{});var q=b(C);F=o(q,"TH",{});var Be=b(F);_=o(Be,"INPUT",{type:!0}),Be.forEach(r),S=A(q),M=o(q,"TH",{"data-svelte-h":!0}),Y(M)!=="svelte-ordyps"&&(M.textContent=x),u=A(q),L=o(q,"TH",{"data-svelte-h":!0}),Y(L)!=="svelte-s0ordp"&&(L.textContent=Z),$=A(q),J=o(q,"TH",{"data-svelte-h":!0}),Y(J)!=="svelte-hx9f2o"&&(J.textContent=re),te=A(q),le=o(q,"TH",{"data-svelte-h":!0}),Y(le)!=="svelte-4f99bg"&&(le.textContent=De),ge=A(q),ae=o(q,"TH",{"data-svelte-h":!0}),Y(ae)!=="svelte-1fywyle"&&(ae.textContent=we),q.forEach(r),Le.forEach(r),Te=A(me),ne=o(me,"TBODY",{});var Ue=b(ne);for(let ye=0;ye<P.length;ye+=1)P[ye].l(Ue);Ue.forEach(r),me.forEach(r),Ce=A(p),ee=o(p,"DIV",{class:!0});var ve=b(ee);X=o(ve,"BUTTON",{class:!0});var Me=b(X);Ee=H(Me,"Download"),Me.forEach(r),Ae=A(ve),ce=o(ve,"P",{});var Ve=b(ce);he=H(Ve,ie),Ve.forEach(r),ve.forEach(r),p.forEach(r),this.h()},h(){v(t,"property","og:description"),v(t,"content","PDAM Card"),be.title="PDAM Card",v(l,"name","description"),v(l,"content","PDAM Card"),v(i,"class","title"),v(D,"href","#"),v(c,"class",N=a[0]==="text"?"is-active":""),v(w,"href","#"),v(T,"class",j=a[0]==="file"?"is-active":""),v(m,"class","tabs is-toggle is-toggle-rounded is-small"),v(_,"type","checkbox"),v(I,"class","table"),X.disabled=fe=!a[4],v(X,"class","button block is-primary"),v(ee,"class","mt-4")},m(f,B){e(be.head,t),e(be.head,l),W(f,n,B),W(f,h,B),e(h,i),e(h,y),e(h,m),e(m,d),e(d,c),e(c,D),e(d,g),e(d,T),e(T,w),e(h,G),z.m(h,null),e(h,K),e(h,I),e(I,O),e(O,C),e(C,F),e(F,_),_.checked=a[2],e(C,S),e(C,M),e(C,u),e(C,L),e(C,$),e(C,J),e(C,te),e(C,le),e(C,ge),e(C,ae),e(I,Te),e(I,ne);for(let p=0;p<P.length;p+=1)P[p]&&P[p].m(ne,null);e(h,Ce),e(h,ee),e(ee,X),e(X,Ee),e(ee,Ae),e(ee,ce),e(ce,he),ke||(xe=[Q(D,"click",a[10]),Q(w,"click",a[11]),Q(_,"change",a[15]),Q(_,"input",a[16]),Q(X,"click",a[18])],ke=!0)},p(f,[B]){if(B&1&&N!==(N=f[0]==="text"?"is-active":"")&&v(c,"class",N),B&1&&j!==(j=f[0]==="file"?"is-active":"")&&v(T,"class",j),_e===(_e=Ne(f))&&z?z.p(f,B):(z.d(1),z=_e(f),z&&(z.c(),z.m(h,K))),B&4&&(_.checked=f[2]),B&2){se=Re(f[1]);let p;for(p=0;p<se.length;p+=1){const de=je(f,se,p);P[p]?P[p].p(de,B):(P[p]=Fe(de),P[p].c(),P[p].m(ne,null))}for(;p<P.length;p+=1)P[p].d(1);P.length=se.length}B&16&&fe!==(fe=!f[4])&&(X.disabled=fe),B&32&&ie!==(ie=f[5]?"Please wait....":"")&&oe(he,ie)},i:Se,o:Se,d(f){f&&(r(n),r(h)),r(t),r(l),z.d(),Xe(P,f),ke=!1,Je(xe)}}}let ue="noSl, name, address, city";function tt(a,t,l){var F;let n="text";const h=[{name:"Jatibarang",address:"Jl. Purna Brata No. 1001 Telp. (0234)  351491"},{name:"Sindang",address:"Jl. Singalodra  - Sindang Telp. (0234) 277564"},{name:"Indramayu",address:"Jl. Tanjungpura No. 197 Kepandean - Indramayu Telp (0234) 7121205"}];let i=[],k=!1,y="",m=!1;const d=_=>h.filter(S=>S.name===_)[0].address;function c(_){const S=_.currentTarget;if(S&&S.files&&S.files[0]){const M=S.files[0],x=new FileReader;x.onload=u=>{var Z;const L=((Z=u.target)==null?void 0:Z.result)??"";He().fromString(L).then($=>{l(1,i=[...i,...$.map(J=>({...J,cabang:d(J.city),selected:!0}))])})},x.readAsText(M,"utf-8")}}function D(_){l(1,i=i.map(S=>({...S,selected:!k})))}function V(_){He().fromString(ue+`
`+y).then(S=>{l(1,i=[...i,...S.map(M=>({...M,cabang:d(M.city),selected:!0}))])})}let N=!1;async function g(_){l(5,N=!0);let S="pdam-card.pdf";const M="/v1/pdam";await We.headers({Accept:"application/pdf","Content-Type":"application/json"}).url(M).post({data:i.filter(x=>x.selected)}).blob(x=>{var u=window.URL.createObjectURL(x),L=document.createElement("a");L.href=u,L.download=S,L.click(),L.remove(),setTimeout(()=>l(5,N=!1),1e3),window.URL.revokeObjectURL(u)}).catch(x=>{l(5,N=!1),console.log(x)})}const T=()=>l(0,n="text"),w=()=>l(0,n="file");function U(){y=this.value,l(3,y)}const j=_=>V(),G=_=>c(_);function K(){k=this.checked,l(2,k)}const I=_=>D();function O(_,S){_[S].selected=this.checked,l(1,i)}const C=_=>g();{const _=(F=document.getElementById("username"))==null?void 0:F.innerText;l(4,m=_==="mastur.st12@outlook.com")}return[n,i,k,y,m,N,c,D,V,g,T,w,U,j,G,K,I,O,C]}class ct extends ze{constructor(t){super(),Ge(this,t,tt,et,qe,{})}}export{ct as component};
