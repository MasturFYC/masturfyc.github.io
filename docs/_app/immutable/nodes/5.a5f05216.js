import{s as $,n as Q,r as tt}from"../chunks/scheduler.7dbf7838.js";import{S as et,i as at,g as d,s as x,m as nt,h as u,j as E,x as j,c as O,f as S,n as st,k as o,a as lt,y as s,B as Y,z as U,F as ot,o as it}from"../chunks/index.44f033d3.js";import{c as Z}from"../chunks/browser.54b85836.js";import{f as rt}from"../chunks/fetch-api.03dee818.js";function ct(r){let t,e,m="Label 103",A,p,h,b,P="Data: (format data: name1, name2, job, address, city)",L,v,D,f,g,M='<i class="fa-solid fa-wand-sparkles mr-2"></i> <span>Parse input to JSON</span>',I,n,l='<i class="fa-solid fa-upload mr-2"></i> <span>Load from CSV/JSON file</span>',_,a,C='<i class="fa-solid fa-download mr-2"></i> <span>Save data as JSON</span>',T,c,J='<i class="fa-solid fa-file-pdf mr-2"></i> <span>Download Label</span>',V,y,F,H,N,B=JSON.stringify(r[0],null,2)+"",R,q,W;return{c(){t=d("section"),e=d("div"),e.textContent=m,A=x(),p=d("div"),h=d("label"),b=d("span"),b.textContent=P,L=x(),v=d("textarea"),D=x(),f=d("div"),g=d("button"),g.innerHTML=M,I=x(),n=d("button"),n.innerHTML=l,_=x(),a=d("button"),a.innerHTML=C,T=x(),c=d("button"),c.innerHTML=J,V=x(),y=d("input"),F=x(),H=d("div"),N=d("pre"),R=nt(B),this.h()},l(k){t=u(k,"SECTION",{});var i=E(t);e=u(i,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-cwkq35"&&(e.textContent=m),A=O(i),p=u(i,"DIV",{class:!0});var X=E(p);h=u(X,"LABEL",{class:!0});var z=E(h);b=u(z,"SPAN",{class:!0,"data-svelte-h":!0}),j(b)!=="svelte-1pv1fq9"&&(b.textContent=P),L=O(z),v=u(z,"TEXTAREA",{class:!0,rows:!0}),E(v).forEach(S),z.forEach(S),X.forEach(S),D=O(i),f=u(i,"DIV",{class:!0});var w=E(f);g=u(w,"BUTTON",{class:!0,"data-svelte-h":!0}),j(g)!=="svelte-hlz625"&&(g.innerHTML=M),I=O(w),n=u(w,"BUTTON",{class:!0,"data-svelte-h":!0}),j(n)!=="svelte-1bm4c8c"&&(n.innerHTML=l),_=O(w),a=u(w,"BUTTON",{class:!0,"data-svelte-h":!0}),j(a)!=="svelte-5tb8c3"&&(a.innerHTML=C),T=O(w),c=u(w,"BUTTON",{class:!0,"data-svelte-h":!0}),j(c)!=="svelte-1oomt1i"&&(c.innerHTML=J),w.forEach(S),V=O(i),y=u(i,"INPUT",{id:!0,type:!0,style:!0,class:!0,accept:!0}),F=O(i),H=u(i,"DIV",{});var G=E(H);N=u(G,"PRE",{class:!0});var K=E(N);R=st(K,B),K.forEach(S),G.forEach(S),i.forEach(S),this.h()},h(){o(e,"class","title"),o(b,"class","svelte-1enzdvs"),o(v,"class","textarea is-full svelte-1enzdvs"),o(v,"rows","10"),o(h,"class","svelte-1enzdvs"),o(p,"class","div-control svelte-1enzdvs"),o(g,"class","button is-success"),o(n,"class","button is-info"),o(a,"class","button is-warning"),o(c,"class","button is-link"),o(f,"class","buttons"),o(y,"id","input-file"),o(y,"type","file"),o(y,"style","display: none"),o(y,"class","button is-success mb-4 mt-2"),o(y,"accept","text/csv,application/json"),o(N,"class","p-0 div-pre svelte-1enzdvs")},m(k,i){lt(k,t,i),s(t,e),s(t,A),s(t,p),s(p,h),s(h,b),s(h,L),s(h,v),Y(v,r[1]),s(t,D),s(t,f),s(f,g),s(f,I),s(f,n),s(f,_),s(f,a),s(f,T),s(f,c),s(t,V),s(t,y),s(t,F),s(t,H),s(H,N),s(N,R),q||(W=[U(v,"input",r[5]),U(g,"click",r[6]),U(n,"click",r[7]),U(a,"click",r[8]),U(c,"click",r[9]),U(y,"change",ot(r[10]))],q=!0)},p(k,[i]){i&2&&Y(v,k[1]),i&1&&B!==(B=JSON.stringify(k[0],null,2)+"")&&it(R,B)},i:Q,o:Q,d(k){k&&S(t),q=!1,tt(W)}}}const dt="id, name1, name2, job, address, city";function ut(r){const t=r.split(".");let e="";return t.length>1&&(e=t[t.length-1]),e}function pt(r){var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(r,null,3)),e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download","data-undangan.json"),document.body.appendChild(e),e.click(),e.remove()}function ft(r,t,e){let m=[];const A={col:3,row:4,labelWidth:64,labelHeight:32,pageWidth:137,pageHeight:200,horizontalPitch:65,verticalPitch:33};let p=`1,Udin,Fitri,,Ds. Plumbon,Indramayu
2,"Wardana, S.Pd",Uung,Pedagang,Blok Bojong RT. 15/06, Ds. Plumbon`;function h(n){Z().fromString(dt+`
`+n).then(l=>{e(0,m=l)})}const b=n=>{const l=[];return n.forEach(_=>{l.push(Object.values(_).map(a=>typeof a=="string"&&a.indexOf(",")>0?'"'+a+'"':a).join(","))}),l.join(`
`)};async function P(n){const l=n.currentTarget;if(l&&l.files&&l.files[0]){const _=l.files[0],a=new FileReader;ut(_.name)==="csv"?a.onload=async C=>{var c;const T=((c=C.target)==null?void 0:c.result)??"";await Z().fromString(T).then(J=>{e(0,m=J),e(1,p=T.substring(T.indexOf(`
`)+1))})}:a.onload=async C=>{var c;const T=((c=C.target)==null?void 0:c.result)??"";e(0,m=await JSON.parse(T)),e(1,p=b(m))},a.readAsText(_,"utf-8")}}const L=async()=>{const n="https://malvamelva.com/api/v1/label103";await rt.headers({Accept:"application/pdf","Content-Type":"application/json"}).url(n,!0).post({opt:{...A},data:m.map(l=>({...l,id:+l.id}))}).blob(l=>{var _=window.URL.createObjectURL(l),a=document.createElement("a");a.href=_,a.download="label103.pdf",a.click(),a.remove(),setTimeout(()=>window.URL.revokeObjectURL(_),1e3)}).catch(l=>{console.log(l)})};function v(){p=this.value,e(1,p)}return[m,p,h,P,L,v,()=>h(p),()=>{const n=document.getElementById("input-file");n==null||n.click()},()=>pt(m),()=>L(),n=>P(n)]}class bt extends et{constructor(t){super(),at(this,t,ft,ct,$,{})}}export{bt as component};
