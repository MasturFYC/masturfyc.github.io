import{s as Je,n as Ee,r as je}from"../chunks/scheduler.95ca1de1.js";import{S as Fe,i as qe,g as s,s as k,m as H,B as Ge,h as o,f as r,c as A,j as g,x as Q,n as J,k as m,y as e,a as Z,z as W,D as Ke,o as ce,G as ze,C as Me}from"../chunks/index.a723b481.js";import{g as Xe}from"../chunks/globals.7f7f1b26.js";import{e as Oe}from"../chunks/each.7fef5230.js";import{c as Ve}from"../chunks/browser.54b85836.js";import{f as Ye}from"../chunks/fetch-api.03dee818.js";const{document:_e}=Xe;function Re(l,t,n){const a=l.slice();return a[20]=t[n],a[21]=t,a[22]=n,a}function Qe(l){let t,n,a,_,d,T,E,p;return{c(){t=s("input"),n=k(),a=s("span"),_=H("CSV Format ("),d=H(ie),T=H(")"),this.h()},l(u){t=o(u,"INPUT",{type:!0,class:!0,accept:!0}),n=A(u),a=o(u,"SPAN",{});var h=g(a);_=J(h,"CSV Format ("),d=J(h,ie),T=J(h,")"),h.forEach(r),this.h()},h(){m(t,"type","file"),m(t,"class","mb-4 mt-2"),m(t,"accept","text/csv")},m(u,h){Z(u,t,h),Z(u,n,h),Z(u,a,h),e(a,_),e(a,d),e(a,T),E||(p=W(t,"change",ze(l[11])),E=!0)},p:Ee,d(u){u&&(r(t),r(n),r(a)),E=!1,p()}}}function We(l){let t,n,a,_,d,T,E,p,u,h;return{c(){t=s("div"),n=s("label"),a=s("span"),_=H("CSV Text (comma delimited) format: ("),d=H(ie),T=H("):"),E=k(),p=s("textarea"),this.h()},l(b){t=o(b,"DIV",{class:!0});var N=g(t);n=o(N,"LABEL",{class:!0});var S=g(n);a=o(S,"SPAN",{});var L=g(a);_=J(L,"CSV Text (comma delimited) format: ("),d=J(L,ie),T=J(L,"):"),L.forEach(r),E=A(S),p=o(S,"TEXTAREA",{class:!0,rows:!0}),g(p).forEach(r),S.forEach(r),N.forEach(r),this.h()},h(){m(p,"class","textarea column is-full svelte-5e1234"),m(p,"rows","10"),m(n,"class","label svelte-5e1234"),m(t,"class","field block")},m(b,N){Z(b,t,N),e(t,n),e(n,a),e(a,_),e(a,d),e(a,T),e(n,E),e(n,p),Me(p,l[3]),u||(h=W(p,"input",l[10]),u=!0)},p(b,N){N&8&&Me(p,b[3])},d(b){b&&r(t),u=!1,h()}}}function He(l){let t,n,a,_,d,T=l[20].noSl+"",E,p,u,h=l[20].name+"",b,N,S,L=l[20].address+"",M,O,K,V=l[20].city+"",z,X,P,f=l[20].cabang+"",C,U,w,I;function j(){l[16].call(a,l[21],l[22])}return{c(){t=s("tr"),n=s("td"),a=s("input"),_=k(),d=s("td"),E=H(T),p=k(),u=s("td"),b=H(h),N=k(),S=s("td"),M=H(L),O=k(),K=s("td"),z=H(V),X=k(),P=s("td"),C=H(f),U=k(),this.h()},l(B){t=o(B,"TR",{});var c=g(t);n=o(c,"TD",{});var F=g(n);a=o(F,"INPUT",{type:!0}),F.forEach(r),_=A(c),d=o(c,"TD",{});var y=g(d);E=J(y,T),y.forEach(r),p=A(c),u=o(c,"TD",{});var $=g(u);b=J($,h),$.forEach(r),N=A(c),S=o(c,"TD",{});var q=g(S);M=J(q,L),q.forEach(r),O=A(c),K=o(c,"TD",{});var ee=g(K);z=J(ee,V),ee.forEach(r),X=A(c),P=o(c,"TD",{});var Y=g(P);C=J(Y,f),Y.forEach(r),U=A(c),c.forEach(r),this.h()},h(){m(a,"type","checkbox")},m(B,c){Z(B,t,c),e(t,n),e(n,a),a.checked=l[20].selected,e(t,_),e(t,d),e(d,E),e(t,p),e(t,u),e(u,b),e(t,N),e(t,S),e(S,M),e(t,O),e(t,K),e(K,z),e(t,X),e(t,P),e(P,C),e(t,U),w||(I=W(a,"change",j),w=!0)},p(B,c){l=B,c&2&&(a.checked=l[20].selected),c&2&&T!==(T=l[20].noSl+"")&&ce(E,T),c&2&&h!==(h=l[20].name+"")&&ce(b,h),c&2&&L!==(L=l[20].address+"")&&ce(M,L),c&2&&V!==(V=l[20].city+"")&&ce(z,V),c&2&&f!==(f=l[20].cabang+"")&&ce(C,f)},d(B){B&&r(t),w=!1,I()}}}function Ze(l){let t,n,a,_,d,T="Kartu PDAM",E,p,u,h,b,N="CSV Text",S,L,M,O,K="File",V,z,X,P,f,C,U,w,I,j="Download",B,c,F,y,$,q,ee,Y,ke="No. SL",pe,te,Ae="NAMA",ve,le,ye="ALAMAT",me,ae,Se="CABANG",be,ne,xe="ALAMAT CABANG",ge,se,Ce,De;function Ne(i,D){return i[0]==="text"?We:Qe}let de=Ne(l),G=de(l),oe=Oe(l[1]),x=[];for(let i=0;i<oe.length;i+=1)x[i]=He(Re(l,oe,i));return{c(){t=s("meta"),n=s("meta"),a=k(),_=s("section"),d=s("div"),d.textContent=T,E=k(),p=s("div"),u=s("ul"),h=s("li"),b=s("a"),b.textContent=N,L=k(),M=s("li"),O=s("a"),O.textContent=K,z=k(),G.c(),X=k(),P=s("div"),f=s("button"),C=H("Parse to JSON"),w=k(),I=s("button"),I.textContent=j,B=k(),c=s("table"),F=s("thead"),y=s("tr"),$=s("th"),q=s("input"),ee=k(),Y=s("th"),Y.textContent=ke,pe=k(),te=s("th"),te.textContent=Ae,ve=k(),le=s("th"),le.textContent=ye,me=k(),ae=s("th"),ae.textContent=Se,be=k(),ne=s("th"),ne.textContent=xe,ge=k(),se=s("tbody");for(let i=0;i<x.length;i+=1)x[i].c();this.h()},l(i){const D=Ge("svelte-15hq90y",_e.head);t=o(D,"META",{property:!0,content:!0}),n=o(D,"META",{name:!0,content:!0}),D.forEach(r),a=A(i),_=o(i,"SECTION",{});var v=g(_);d=o(v,"DIV",{class:!0,"data-svelte-h":!0}),Q(d)!=="svelte-14g43s4"&&(d.textContent=T),E=A(v),p=o(v,"DIV",{class:!0});var re=g(p);u=o(re,"UL",{});var ue=g(u);h=o(ue,"LI",{class:!0});var Le=g(h);b=o(Le,"A",{href:!0,"data-svelte-h":!0}),Q(b)!=="svelte-q1uj1g"&&(b.textContent=N),Le.forEach(r),L=A(ue),M=o(ue,"LI",{class:!0});var Pe=g(M);O=o(Pe,"A",{href:!0,"data-svelte-h":!0}),Q(O)!=="svelte-1a2fnp4"&&(O.textContent=K),Pe.forEach(r),ue.forEach(r),re.forEach(r),z=A(v),G.l(v),X=A(v),P=o(v,"DIV",{class:!0});var fe=g(P);f=o(fe,"BUTTON",{class:!0});var we=g(f);C=J(we,"Parse to JSON"),we.forEach(r),w=A(fe),I=o(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(I)!=="svelte-16clbi9"&&(I.textContent=j),fe.forEach(r),v.forEach(r),B=A(i),c=o(i,"TABLE",{class:!0});var he=g(c);F=o(he,"THEAD",{});var Ie=g(F);y=o(Ie,"TR",{});var R=g(y);$=o(R,"TH",{});var Ue=g($);q=o(Ue,"INPUT",{type:!0}),Ue.forEach(r),ee=A(R),Y=o(R,"TH",{"data-svelte-h":!0}),Q(Y)!=="svelte-ordyps"&&(Y.textContent=ke),pe=A(R),te=o(R,"TH",{"data-svelte-h":!0}),Q(te)!=="svelte-s0ordp"&&(te.textContent=Ae),ve=A(R),le=o(R,"TH",{"data-svelte-h":!0}),Q(le)!=="svelte-hx9f2o"&&(le.textContent=ye),me=A(R),ae=o(R,"TH",{"data-svelte-h":!0}),Q(ae)!=="svelte-4f99bg"&&(ae.textContent=Se),be=A(R),ne=o(R,"TH",{"data-svelte-h":!0}),Q(ne)!=="svelte-1fywyle"&&(ne.textContent=xe),R.forEach(r),Ie.forEach(r),ge=A(he),se=o(he,"TBODY",{});var Be=g(se);for(let Te=0;Te<x.length;Te+=1)x[Te].l(Be);Be.forEach(r),he.forEach(r),this.h()},h(){m(t,"property","og:description"),m(t,"content","PDAM Card"),_e.title="PDAM Card",m(n,"name","description"),m(n,"content","PDAM Card"),m(d,"class","title"),m(b,"href","#"),m(h,"class",S=l[0]==="text"?"is-active":""),m(O,"href","#"),m(M,"class",V=l[0]==="file"?"is-active":""),m(p,"class","tabs is-toggle is-toggle-rounded is-small"),f.disabled=U=l[0]!=="text",m(f,"class","button is-link block"),m(I,"class","button block is-primary"),m(P,"class","buttons block"),m(q,"type","checkbox"),m(c,"class","table")},m(i,D){e(_e.head,t),e(_e.head,n),Z(i,a,D),Z(i,_,D),e(_,d),e(_,E),e(_,p),e(p,u),e(u,h),e(h,b),e(u,L),e(u,M),e(M,O),e(_,z),G.m(_,null),e(_,X),e(_,P),e(P,f),e(f,C),e(P,w),e(P,I),Z(i,B,D),Z(i,c,D),e(c,F),e(F,y),e(y,$),e($,q),q.checked=l[2],e(y,ee),e(y,Y),e(y,pe),e(y,te),e(y,ve),e(y,le),e(y,me),e(y,ae),e(y,be),e(y,ne),e(c,ge),e(c,se);for(let v=0;v<x.length;v+=1)x[v]&&x[v].m(se,null);Ce||(De=[W(b,"click",l[8]),W(O,"click",l[9]),W(f,"click",l[12]),W(I,"click",l[13]),W(q,"change",l[14]),W(q,"input",l[15])],Ce=!0)},p(i,[D]){if(D&1&&S!==(S=i[0]==="text"?"is-active":"")&&m(h,"class",S),D&1&&V!==(V=i[0]==="file"?"is-active":"")&&m(M,"class",V),de===(de=Ne(i))&&G?G.p(i,D):(G.d(1),G=de(i),G&&(G.c(),G.m(_,X))),D&1&&U!==(U=i[0]!=="text")&&(f.disabled=U),D&4&&(q.checked=i[2]),D&2){oe=Oe(i[1]);let v;for(v=0;v<oe.length;v+=1){const re=Re(i,oe,v);x[v]?x[v].p(re,D):(x[v]=He(re),x[v].c(),x[v].m(se,null))}for(;v<x.length;v+=1)x[v].d(1);x.length=oe.length}},i:Ee,o:Ee,d(i){i&&(r(a),r(_),r(B),r(c)),r(t),r(n),G.d(),Ke(x,i),Ce=!1,je(De)}}}let ie="noSl, name, address, city";function $e(l,t,n){let a="text";const _=[{name:"Jatibarang",address:"Jl. Purna Brata No. 1001 Telp. (0234)  351491"},{name:"Sindang",address:"Jl. Singalodra  - Sindang Telp. (0234) 277564"},{name:"Indramayu",address:"Jl. Tanjungpura No. 197 Kepandean - Indramayu Telp (0234) 7121205"}];let d=[],T=!1,E="";const p=f=>_.filter(C=>C.name===f)[0].address;function u(f){const C=f.currentTarget;if(C&&C.files&&C.files[0]){const U=C.files[0],w=new FileReader;w.onload=I=>{var B;const j=((B=I.target)==null?void 0:B.result)??"";Ve().fromString(j).then(c=>{n(1,d=[...d,...c.map(F=>({...F,cabang:p(F.city),selected:!0}))])})},w.readAsText(U,"utf-8")}}function h(f){n(1,d=d.map(C=>({...C,selected:!T})))}function b(f){Ve().fromString(ie+`
`+E).then(C=>{n(1,d=[...d,...C.map(U=>({...U,cabang:p(U.city),selected:!0}))])})}async function N(f){let C="pdam-card.pdf";const U="/v1/pdam";await Ye.headers({Accept:"application/pdf","Content-Type":"application/json"}).url(U).post({data:d.filter(w=>w.selected)}).blob(w=>{var I=window.URL.createObjectURL(w),j=document.createElement("a");j.href=I,j.download=C,j.click(),j.remove(),setTimeout(()=>!1,1e3),window.URL.revokeObjectURL(I)}).catch(w=>{console.log(w)})}const S=()=>n(0,a="text"),L=()=>n(0,a="file");function M(){E=this.value,n(3,E)}const O=f=>u(f),K=f=>b(),V=f=>N();function z(){T=this.checked,n(2,T)}const X=f=>h();function P(f,C){f[C].selected=this.checked,n(1,d)}return[a,d,T,E,u,h,b,N,S,L,M,O,K,V,z,X,P]}class ot extends Fe{constructor(t){super(),qe(this,t,$e,Ze,Je,{})}}export{ot as component};
